<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dra. Kevlen Nogueira — Ficha Digital (Sem Valores)</title>
<style>
  :root { --ink:#1b1f24; --muted:#5b616a; --border:#d7dbe0; --accent:#4a0f26; --gap:12px; }
  * { box-sizing: border-box; }
  html, body { height: 100%; }
  body { font-family: Arial, Helvetica, sans-serif; color: var(--ink); margin: 0; background:#fff; }
  .container { max-width: 940px; margin: 0 auto; padding: 24px; }
  .card { border:1px solid var(--border); border-radius:12px; padding:16px; margin-bottom:16px; background:#fff; }
  .brand-header {
    border:1px solid var(--border); border-radius:12px; padding:16px;
    display:grid; grid-template-columns:120px 1fr; gap:16px; align-items:center;
    margin-bottom:16px; background:#faf8fa;
  }
  .brand-title { margin:0; font-size:22px; letter-spacing:0.2px; color:#1b1f24; }
  .brand-sub { margin:2px 0 0 0; color:#6b7280; font-size:12px; line-height:1.35; }
  #logo { width:120px; height:120px; object-fit:cover; border-radius:8px; display:block; box-shadow:0 0 0 1px var(--border) inset; }
  .grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:var(--gap); }
  label { font-size:13px; color:var(--ink); }
  input[type="text"], input[type="date"], textarea {
    width:100%; padding:10px; border:1px solid var(--border); border-radius:8px; font-size:14px; background:#fff;
  }
  textarea { min-height:80px; }
  .muted { color: var(--muted); font-size:12px; }
  .section-title { font-size:15px; margin:0 0 8px 0; font-weight:bold; color:var(--accent); }
  .group-title { font-weight:bold; margin:10px 0 6px; color:var(--accent); }
  .protocols { max-height:420px; overflow:auto; padding-right:6px; }
  .protocol-item { display:grid; grid-template-columns:auto 1fr; gap:8px; align-items:center; padding:9px 0; border-bottom:1px dashed var(--border); }
  .controls { display:flex; gap:10px; align-items:center; }
  .btn { appearance:none; border:1px solid var(--accent); background:var(--accent); color:#fff; padding:10px 14px; border-radius:8px; font-size:14px; cursor:pointer; }
  .btn.secondary { background:#fff; color:var(--accent); }
  .print-area { display:none; }
  @media print {
    .no-print { display:none !important; }
    .print-area { display:block; }
    .container { padding:16px; }
    .print-brand-row { display:grid; grid-template-columns:80px 1fr; gap:12px; align-items:center; margin-bottom:8px; }
    .print-meta { font-size:11px; color:#000; }
    .print-table { width:100%; border-collapse:collapse; }
    .print-table th, .print-table td { border:1px solid #000; padding:6px 8px; font-size:12px; }
    .sign-row { display:grid; grid-template-columns:1fr 1fr; gap:24px; margin-top:20px; }
    .terms { font-size:10px; color:#000; margin-top:8px; }
    .group-row th { background:#f1f5f9; text-align:left; }
  }
</style>

<style>
@media print {

  @page {
    size: A4;
    margin: 8mm;
  }

  body {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10.5px;
    line-height: 1.15;
    color: #000;
  }

  .no-print {
    display: none !important;
  }

  .print-area {
    display: block;
  }

  .card,
  .brand-header,
  .grid-2,
  .protocol-item,
  table,
  tr,
  td {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  .protocols {
    max-height: none !important;
    overflow: visible !important;
  }

  .container {
    padding: 6px;
  }

  .card {
    padding: 6px;
    margin-bottom: 6px;
    border-radius: 6px;
  }

  label {
    font-size: 10px;
    font-weight: bold;
  }

  input,
  textarea {
    font-size: 10.5px;
    padding: 4px 6px;
    border: 1px solid #000;
  }

  textarea {
    min-height: 42px;
  }

  .section-title,
  .group-title {
    font-size: 11px;
    font-weight: bold;
    margin: 4px 0 2px;
    text-transform: uppercase;
  }

  #logo {
    width: 65px;
    height: 65px;
  }

  .brand-header {
    grid-template-columns: 70px 1fr;
    gap: 8px;
    padding: 6px;
    margin-bottom: 6px;
  }
}
</style>

</head>
<body>

<div class="brand-sub">
  Falo sobre emagrecimento e hormônios de um jeito que você entende e sente
</div>

    </div>
  </div>

  <div class="card grid-2">
    <div>
      <label for="paciente">Nome do paciente</label>
      <input id="paciente" type="text" placeholder="Nome completo">
    </div>
    <div>
      <label for="data">Data</label>
      <input id="data" type="date">
    </div>
  </div>

  <div class="card">
    <div class="section-title">Protocolos</div>
    <p class="muted">Marque os protocolos indicados. A recepção informará os valores ao paciente.</p>
    <div class="protocols" id="protocols"></div>
  </div>

  <div class="card">
    <div class="section-title">Observações</div>
    <textarea id="obs" placeholder="Instruções médicas, posologia, orientações pós-aplicação..."></textarea>
  </div>

  <div class="card controls">
    <button class="btn" onclick="gerarFicha()">Gerar PDF</button>
    <button class="btn secondary" onclick="limpar()">Limpar</button>
  </div>
</div>

<div class="container print-area" id="printArea">
  <div class="print-brand-row">
    <div><img id="logoPrint" alt="Logo" style="width:80px;height:80px;object-fit:cover;"/></div>
    <div style="text-align:left;">
      <div style="font-weight:bold; font-size:16px;">Dra. Kevlen Nogueira</div>
      <div class="print-meta">Endocrinologia &amp; Metabologia • CRM/CRBM: __________ • (__) ____-____ • atendimento@dra-kevlen.com.br</div>
      <div class="print-meta">Endereço: ____________________________________________</div>
    </div>
  </div>

  <div style="text-align:left; font-size: 13px; margin: 6px 0 10px;">
    <b>Paciente:</b> <span id="pOut"></span> &nbsp;&nbsp; | &nbsp;&nbsp;
    <b>Data:</b> <span id="dOut"></span>
  </div>

  <table class="print-table" id="tabelaPrint">
    <thead>
      <tr>
        <th style="width: 120px;">Categoria</th>
        <th style="width: 70px;">Código</th>
        <th>Protocolo</th>
        <th style="width: 120px;">Selecionado</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div style="margin-top: 8px; font-size: 12px;">
    <b>Observações:</b>
    <div id="obsOut" style="white-space: pre-wrap; border:1px solid #000; padding:8px; min-height:48px;"></div>
  </div>

  <div class="sign-row">
    <div><b>Assinatura Médica:</b> ___________________________________________</div>
    <div><b>Assinatura do Paciente:</b> ______________________________________</div>
  </div>

  <div class="terms">
    Declaro ter sido informado(a) sobre o(s) protocolo(s) acima. Valores serão informados pela recepção.
  </div>
</div>

<script>
  // --- Grupos e protocolos ---
  const grupos = [
    {
      nome: "Protocolos Originais (STI)",
      items: [
        { codigo: "STI 1", nome: "Acelerador Metabólico" },
        { codigo: "STI 2", nome: "Lipólise e Performance" },
        { codigo: "STI 3", nome: "Contenção Alimentar" },
        { codigo: "STI 4", nome: "Contenção Carbo" },
        { codigo: "STI 5", nome: "Ansiedade e Estresse" },
        { codigo: "STI 6", nome: "Booster Emagrecedor" },
      { codigo: "STI 7", nome: "Vitamina D" },
      { codigo: "STI 8", nome: "Vitamina C" },
      { codigo: "STI 9", nome: "B12 (cianocobalamina)" },
      { codigo: "STI 10", nome: "B12 (metilcobalamina)" },
      { codigo: "STI 11", nome: "ADEK" },
      { codigo: "STI 12", nome: "Tiamina" },
      { codigo: "STI 13", nome: "Resveratrol" },
      { codigo: "STI 14", nome: "Ácido alfa-lipóico" },
      { codigo: "STI 15", nome: "Complexo B" },
      { codigo: "STI 18", nome: "Complexo B1" },
      { codigo: "STI 19", nome: "Protocolo de gordura localizada" },

        { codigo: "STI 16", nome: "Aporte Vitamínico Capilar" },
        { codigo: "STI 17", nome: "Vitalidade Capilar" }
      ]
    },
    {
      nome: "Protocolo de Lipedema",
      items: [
        { codigo: "LIP 1", nome: "Tizerpatida 1,25 mg + Ácido Alfalipoico 10 mg/2 ml IM (4 Sem)" }
      ]
    },
    {
      nome: "Protocolos de Emagrecimento (Tirzepatida)",
      items: [
        { codigo: "TIR 2,5", nome: "Tizerpatida 2,5 mg" },
        { codigo: "TIR 5",   nome: "Tizerpatida 5 mg" },
        { codigo: "TIR 7,5", nome: "Tizerpatida 7,5 mg" },
        { codigo: "TIR 10",  nome: "Tizerpatida 10 mg" },
        { codigo: "TIR 12,5",nome: "Tizerpatida 12,5 mg" },
        { codigo: "TIR 15",  nome: "Tizerpatida 15 mg" }
      ]
    }
  ];

  const protContainer = document.getElementById('protocols');
  const logoEl = document.getElementById('logo');
  const logoPrintEl = document.getElementById('logoPrint');

  function renderProtocolos() {
    protContainer.innerHTML = '';
    grupos.forEach((g, gIdx) => {
      const h = document.createElement('div');
      h.className = 'group-title';
      h.textContent = g.nome;
      protContainer.appendChild(h);

      g.items.forEach((p, idx) => {
        const row = document.createElement('div');
        row.className = 'protocol-item';
        const id = `chk_${gIdx}_${idx}`;
        row.innerHTML = `
          <label class="flex" style="gap:8px; align-items:center;">
            <input type="checkbox" id="${id}" />
            <span><b>${p.codigo}</b> — ${p.nome}</span>
          </label>
        `;
        protContainer.appendChild(row);
      });
    });
  }

  function gerarFicha() {
  const nome = document.getElementById('paciente').value.trim();
  const data = document.getElementById('data').value;
  const obs = document.getElementById('obs').value.trim();

  document.getElementById('pOut').textContent = nome || '—';
  document.getElementById('dOut').textContent = data || '—';
  document.getElementById('obsOut').textContent = obs || '';

  logoPrintEl.src = logoEl.src || '';

  const tbody = document.querySelector('#tabelaPrint tbody');
  tbody.innerHTML = '';

  let temSelecionado = false;

  grupos.forEach((g, gIdx) => {
    g.items.forEach((p, idx) => {
      const checkbox = document.getElementById(`chk_${gIdx}_${idx}`);
      if (checkbox && checkbox.checked) {
        temSelecionado = true;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${g.nome}</td>
          <td style="text-align:center;">${p.codigo}</td>
          <td>${p.nome}</td>
          <td style="text-align:center;">✔</td>
        `;
        tbody.appendChild(tr);
      }
    });
  });

  if (!temSelecionado) {
    alert("Selecione pelo menos um protocolo antes de gerar o PDF.");
    return;
  }

  document.getElementById('printArea').style.display = 'block';
  window.print();
}


  function limpar() {
    document.getElementById('paciente').value = '';
    document.getElementById('data').value = '';
    document.getElementById('obs').value = '';
    grupos.forEach((g, gIdx) => {
      g.items.forEach((p, idx) => {
        const el = document.getElementById(`chk_${gIdx}_${idx}`);
        if (el) el.checked = false;
      });
    });
    document.getElementById('printArea').style.display = 'none';
  }

  // Inicializa
  renderProtocolos();
</script>

</body>
</html>
